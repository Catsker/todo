{"ast":null,"code":"import \"core-js/modules/es.array.push.js\";\nimport \"core-js/modules/es.iterator.constructor.js\";\nimport \"core-js/modules/es.iterator.every.js\";\nimport \"core-js/modules/es.iterator.filter.js\";\nimport \"core-js/modules/es.iterator.find.js\";\nimport \"core-js/modules/es.iterator.for-each.js\";\nimport { createStore } from 'vuex';\nexport default createStore({\n  state() {\n    return {\n      tasks: [{\n        id: 1,\n        text: 'Закончить проект',\n        completed: false,\n        subtasks: [{\n          id: 1,\n          text: \"Создать компоненты\",\n          completed: true\n        }, {\n          id: 2,\n          text: \"Написать тесты\",\n          completed: false\n        }]\n      }, {\n        id: 2,\n        text: 'Купить продукты',\n        completed: true,\n        subtasks: [{\n          id: 1,\n          text: \"Хлеб\",\n          completed: true\n        }, {\n          id: 2,\n          text: \"Молоко\",\n          completed: false\n        }, {\n          id: 3,\n          text: \"Яйца\",\n          completed: true\n        }]\n      }],\n      add_task: '',\n      filter: 'all'\n    };\n  },\n  getters: {\n    showTasks: state => state.tasks,\n    showDoneTasks: state => {\n      let completed;\n      state.tasks.forEach(task => {\n        if (task.completed) {\n          completed++;\n        }\n      });\n      return `${completed}/${state.tasks.length}`;\n    }\n  },\n  mutations: {\n    ADD_TASK(state, taskText) {\n      const newTask = {\n        id: Date.now(),\n        text: taskText.trim(),\n        completed: false,\n        subtasks: []\n      };\n      if (newTask.text) state.tasks.push(newTask);\n    },\n    ADD_SUBTASK(state, {\n      taskId,\n      subtaskText\n    }) {\n      const newSubtask = {\n        id: Date.now(),\n        text: subtaskText.trim(),\n        completed: false\n      };\n      const currentTask = state.tasks.find(task => task.id === taskId);\n      if (newSubtask.text && currentTask) {\n        currentTask.subtasks.push(newSubtask);\n      }\n      update_tasks_checked_state(state, currentTask);\n    },\n    DELETE_TASK(state, taskId) {\n      state.tasks = state.tasks.filter(task => task.id !== taskId);\n    },\n    DELETE_SUBTASK(state, {\n      taskId,\n      subtaskId\n    }) {\n      const task = state.tasks.find(task => task.id === taskId);\n      if (!task?.subtasks) return;\n      const index = task.subtasks.findIndex(s => s.id === subtaskId);\n      if (index !== -1) {\n        task.subtasks.splice(index, 1);\n        task.completed = task.subtasks.length === 0 ? false : task.subtasks.every(s => s.completed);\n      }\n    },\n    UPDATE_TASK_CHECKED(state, taskId) {\n      const task = state.tasks.find(t => t.id === taskId);\n      if (task) {\n        task.completed = !task.completed;\n        update_subtasks_checked_state(state, task);\n      }\n    },\n    UPDATE_SUBTASK_CHECKED(state, {\n      taskId,\n      subtaskId\n    }) {\n      const task = state.tasks.find(task => task.id === taskId);\n      if (!task) return;\n      const subtask = task.subtasks.find(t => t.id === subtaskId);\n      if (subtask) subtask.completed = !subtask.completed;\n      update_tasks_checked_state(state, task);\n    }\n  }\n});\nconst update_subtasks_checked_state = (state, task) => {\n  if (Array.isArray(task.subtasks)) {\n    task.subtasks.forEach(subtask => {\n      subtask.completed = task.completed;\n    });\n  }\n};\nconst update_tasks_checked_state = (state, task) => {\n  if (!Array.isArray(task.subtasks)) {\n    console.log('empty');\n    return;\n  }\n  task.completed = task.subtasks.every(subtask => subtask.completed);\n};","map":{"version":3,"names":["createStore","state","tasks","id","text","completed","subtasks","add_task","filter","getters","showTasks","showDoneTasks","forEach","task","length","mutations","ADD_TASK","taskText","newTask","Date","now","trim","push","ADD_SUBTASK","taskId","subtaskText","newSubtask","currentTask","find","update_tasks_checked_state","DELETE_TASK","DELETE_SUBTASK","subtaskId","index","findIndex","s","splice","every","UPDATE_TASK_CHECKED","t","update_subtasks_checked_state","UPDATE_SUBTASK_CHECKED","subtask","Array","isArray","console","log"],"sources":["C:/Users/Pavel/Documents/webstorm/todo/src/store.js"],"sourcesContent":["import {createStore} from 'vuex'\r\n\r\nexport default createStore({\r\n  state() {\r\n    return {\r\n      tasks: [\r\n        {\r\n          id: 1,\r\n          text: 'Закончить проект',\r\n          completed: false,\r\n          subtasks: [\r\n            {id: 1, text: \"Создать компоненты\", completed: true},\r\n            {id: 2, text: \"Написать тесты\", completed: false}\r\n          ]\r\n        },\r\n        {\r\n          id: 2,\r\n          text: 'Купить продукты',\r\n          completed: true,\r\n          subtasks: [\r\n            {id: 1, text: \"Хлеб\", completed: true},\r\n            {id: 2, text: \"Молоко\", completed: false},\r\n            {id: 3, text: \"Яйца\", completed: true}\r\n          ]\r\n        }\r\n      ],\r\n      add_task: '',\r\n      filter: 'all'\r\n    }\r\n  },\r\n  getters: {\r\n    showTasks: (state) => state.tasks,\r\n    showDoneTasks: (state) => {\r\n      let completed\r\n      state.tasks.forEach(task => {\r\n        if (task.completed) {\r\n          completed++\r\n        }\r\n      })\r\n      return `${completed}/${state.tasks.length}`\r\n    }\r\n  },\r\n  mutations: {\r\n    ADD_TASK(state, taskText) {\r\n      const newTask = {\r\n        id: Date.now(),\r\n        text: taskText.trim(),\r\n        completed: false,\r\n        subtasks: []\r\n      };\r\n      if (newTask.text) state.tasks.push(newTask);\r\n    },\r\n    ADD_SUBTASK(state, {taskId, subtaskText}) {\r\n      const newSubtask = {\r\n        id: Date.now(),\r\n        text: subtaskText.trim(),\r\n        completed: false,\r\n      };\r\n      const currentTask = state.tasks.find(task => task.id === taskId);\r\n      if (newSubtask.text && currentTask) {\r\n        currentTask.subtasks.push(newSubtask);\r\n      }\r\n      update_tasks_checked_state(state, currentTask)\r\n    },\r\n    DELETE_TASK(state, taskId) {\r\n      state.tasks = state.tasks.filter(task => task.id !== taskId);\r\n    },\r\n    DELETE_SUBTASK(state, { taskId, subtaskId }) {\r\n      const task = state.tasks.find(task => task.id === taskId);\r\n      if (!task?.subtasks) return;\r\n\r\n      const index = task.subtasks.findIndex(s => s.id === subtaskId);\r\n      if (index !== -1) {\r\n        task.subtasks.splice(index, 1);\r\n        task.completed = task.subtasks.length === 0\r\n          ? false\r\n          : task.subtasks.every(s => s.completed);\r\n      }\r\n    },\r\n    UPDATE_TASK_CHECKED(state, taskId) {\r\n      const task = state.tasks.find(t => t.id === taskId);\r\n      if (task) {\r\n        task.completed = !task.completed;\r\n        update_subtasks_checked_state(state, task);\r\n      }\r\n    },\r\n    UPDATE_SUBTASK_CHECKED(state, {taskId, subtaskId}) {\r\n      const task = state.tasks.find(task => task.id === taskId);\r\n      if (!task) return;\r\n      const subtask = task.subtasks.find(t => t.id === subtaskId);\r\n      if (subtask) subtask.completed = !subtask.completed;\r\n      update_tasks_checked_state(state, task)\r\n    }\r\n  }\r\n})\r\n\r\nconst update_subtasks_checked_state = (state, task) => {\r\n  if (Array.isArray(task.subtasks)) {\r\n    task.subtasks.forEach((subtask) => {\r\n      subtask.completed = task.completed;\r\n    });\r\n  }\r\n};\r\n\r\nconst update_tasks_checked_state = (state, task) => {\r\n  if (!Array.isArray(task.subtasks)) {\r\n    console.log('empty');\r\n    return;\r\n  }\r\n  task.completed = task.subtasks.every(subtask => subtask.completed);\r\n};"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}